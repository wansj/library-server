{"version":3,"sources":["../../models/BorrowPlan.js"],"names":["ReserveSchema","Schema","kind","type","String","enum","required","userId","unique","bookIds","Types","ObjectId","expireAt","Date","index","expires","Reserve","model","e","name"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,gBAAgB,mBAASC,MAAT,CAAgB;AACpCC,QAAM,EAACC,MAAMC,MAAP,EAAeC,MAAM,CAAC,QAAD,EAAW,QAAX,CAArB,EAA2CC,UAAU,IAArD,EAD8B;AAEpCC,UAAQ,EAAEJ,MAAMC,MAAR,EAAgBE,UAAU,IAA1B,EAAgCE,QAAQ,IAAxC,EAF4B;AAGpCC,WAAS,EAAEN,MAAM,CAAC,mBAASF,MAAT,CAAgBS,KAAhB,CAAsBC,QAAvB,CAAR,EAA0CL,UAAU,IAApD,EAH2B;AAIpCM,YAAU,EAAET,MAAMU,IAAR,EAAcP,UAAU,IAAxB;AAJ0B,CAAhB,CAAtB;AAMAN,cAAcc,KAAd,CAAoB,EAACF,UAAU,CAAX,EAApB,EAAmC,EAACG,SAAS,CAAV,EAAnC;AACA,IAAIC,UAAU,IAAd;AACA,IAAI;AACFA,YAAU,mBAASC,KAAT,CAAe,SAAf,EAA0BjB,aAA1B,CAAV;AACD,CAFD,CAEE,OAAOkB,CAAP,EAAU;AACV,MAAIA,EAAEC,IAAF,KAAW,qBAAf,EAAsC;AACpCH,cAAU,mBAASC,KAAT,CAAe,SAAf,CAAV;AACD;AACF;kBACcD,O","file":"BorrowPlan.js","sourcesContent":["import mongoose from 'mongoose'\n\nconst ReserveSchema = mongoose.Schema({\n  kind: {type: String, enum: ['BORROW', 'RETURN'], required: true},\n  userId: { type: String, required: true, unique: true },\n  bookIds: { type: [mongoose.Schema.Types.ObjectId], required: true },\n  expireAt: { type: Date, required: true }\n})\nReserveSchema.index({expireAt: 1}, {expires: 0})\nlet Reserve = null\ntry {\n  Reserve = mongoose.model('Reserve', ReserveSchema)\n} catch (e) {\n  if (e.name === 'OverwriteModelError') {\n    Reserve = mongoose.model('Reserve')\n  }\n}\nexport default Reserve"]}