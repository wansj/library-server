{"version":3,"sources":["../../models/ReadPlan.js"],"names":["ReadPlanSchema","Schema","userId","type","Types","ObjectId","required","title","String","plans","Array","validate","validator","v","hasOwnProperty","message","createAt","Date","ReadPlan","model","e","name"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,iBAAiB,mBAASC,MAAT,CAAgB;AACrCC,UAAQ;AACNC,UAAM,mBAASF,MAAT,CAAgBG,KAAhB,CAAsBC,QADtB;AAENC,cAAU;AAFJ,GAD6B;AAKrCC,SAAO;AACLJ,UAAMK,MADD;AAELF,cAAU;AAFL,GAL8B;AASrCG,SAAO;AACLN,UAAMO,KADD;AAELJ,cAAU,IAFL;AAGLK,cAAU;AACRC,iBAAW,mBAAUC,CAAV,EAAa;AACtB,eAAO,CAACA,EAAEC,cAAF,CAAiB,QAAjB,CAAD,IAA+B,CAACD,EAAEC,cAAF,CAAiB,UAAjB,CAAvC;AACD,OAHO;AAIRC,eAAS;AAJD;AAHL,GAT8B;AAmBrCC,YAAU;AACRb,UAAMc,IADE;AAERX,cAAU;AAFF;AAnB2B,CAAhB,CAAvB;AAwBA,IAAIY,WAAW,IAAf;AACA,IAAI;AACFA,aAAW,mBAASC,KAAT,CAAe,UAAf,EAA2BnB,cAA3B,CAAX;AACD,CAFD,CAEE,OAAOoB,CAAP,EAAU;AACV,MAAIA,EAAEC,IAAF,KAAW,qBAAf,EAAsC;AACpCH,eAAW,mBAASC,KAAT,CAAe,UAAf,CAAX;AACD;AACF;kBACcD,Q","file":"ReadPlan.js","sourcesContent":["import mongoose from 'mongoose'\n\nconst ReadPlanSchema = mongoose.Schema({\n  userId: {\n    type: mongoose.Schema.Types.ObjectId,\n    required: true\n  },\n  title: {\n    type: String,\n    required: true\n  },\n  plans: {\n    type: Array,\n    required: true,\n    validate: {\n      validator: function (v) {\n        return !v.hasOwnProperty('bookId') || !v.hasOwnProperty('timespan')\n      },\n      message: 'plans必须包含bookId和timespan属性'\n    }\n  },\n  createAt: {\n    type: Date,\n    required: true\n  }\n})\nlet ReadPlan = null\ntry {\n  ReadPlan = mongoose.model('ReadPlan', ReadPlanSchema)\n} catch (e) {\n  if (e.name === 'OverwriteModelError') {\n    ReadPlan = mongoose.model('ReadPlan')\n  }\n}\nexport default ReadPlan"]}