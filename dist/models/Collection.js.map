{"version":3,"sources":["../../models/Collection.js"],"names":["CollectionSchema","Schema","userId","type","String","required","unique","books","Array","default","validate","validator","v","hasOwnProperty","message","Collection","model","e","name"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,mBAAmB,mBAASC,MAAT,CAAgB;AACvCC,UAAQ,EAAEC,MAAMC,MAAR,EAAgBC,UAAU,IAA1B,EAAgCC,QAAQ,IAAxC,EAD+B;AAEvC;AACAC,SAAO;AACLJ,UAAMK,KADD;AAELH,cAAU,IAFL;AAGLI,aAAS,EAHJ;AAILC,cAAU;AACRC,iBAAW,mBAAUC,CAAV,EAAa;AACtB,eAAO,CAACA,EAAEC,cAAF,CAAiB,IAAjB,CAAD,IAA2B,CAACD,EAAEC,cAAF,CAAiB,KAAjB,CAAnC;AACD,OAHO;AAIRC,eAAS;AAJD;AAJL;AAHgC,CAAhB,CAAzB;AAeA,IAAIC,aAAa,IAAjB;AACA,IAAI;AACFA,eAAa,mBAASC,KAAT,CAAe,YAAf,EAA6BhB,gBAA7B,CAAb;AACD,CAFD,CAEE,OAAOiB,CAAP,EAAU;AACV,MAAIA,EAAEC,IAAF,KAAW,qBAAf,EAAsC;AACpCH,iBAAa,mBAASC,KAAT,CAAe,YAAf,CAAb;AACD;AACF;kBACcD,U","file":"Collection.js","sourcesContent":["import mongoose from 'mongoose'\n\nconst CollectionSchema = mongoose.Schema({\n  userId: { type: String, required: true, unique: true },\n  // bookIds: { type: [String], required: true }\n  books: {\n    type: Array,\n    required: true,\n    default: [],\n    validate: {\n      validator: function (v) {\n        return !v.hasOwnProperty('id') || !v.hasOwnProperty('iat')\n      },\n      message: 'plans必须包含id和iat属性'\n    }\n  }\n})\nlet Collection = null\ntry {\n  Collection = mongoose.model('Collection', CollectionSchema)\n} catch (e) {\n  if (e.name === 'OverwriteModelError') {\n    Collection = mongoose.model('Collection')\n  }\n}\nexport default Collection"]}