{"version":3,"sources":["../../models/Conversation.js"],"names":["ConversationSchema","Schema","participators","type","String","required","validate","validator","v","length","message","posts","Types","ObjectId","default","Conversation","model","e","name"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,qBAAqB,mBAASC,MAAT,CAAgB;AACzCC,iBAAe;AACbC,UAAM,CAACC,MAAD,CADO;AAEbC,cAAU,IAFG;AAGbC,cAAU;AACRC,iBAAW,mBAAUC,CAAV,EAAa;AACtB,eAAOA,EAAEC,MAAF,IAAY,CAAnB;AACD,OAHO;AAIRC,eAAS;AAJD;AAHG,GAD0B;AAWzCC,SAAO;AACLR,UAAM,CAAC,mBAASF,MAAT,CAAgBW,KAAhB,CAAsBC,QAAvB,CADD;AAELC,aAAS;AAFJ;AAXkC,CAAhB,CAA3B;AAgBA,IAAIC,eAAe,IAAnB;AACA,IAAI;AACFA,iBAAe,mBAASC,KAAT,CAAe,cAAf,EAA+BhB,kBAA/B,CAAf;AACD,CAFD,CAEE,OAAOiB,CAAP,EAAU;AACV,MAAIA,EAAEC,IAAF,KAAW,qBAAf,EAAsC;AACpCH,mBAAe,mBAASC,KAAT,CAAe,cAAf,CAAf;AACD;AACF;;kBAEcD,Y","file":"Conversation.js","sourcesContent":["import mongoose from 'mongoose'\n\nconst ConversationSchema = mongoose.Schema({\n  participators: {\n    type: [String],\n    required: true,\n    validate: {\n      validator: function (v) {\n        return v.length >= 2\n      },\n      message: '会话至少需要两个人'\n    }\n  },\n  posts: {\n    type: [mongoose.Schema.Types.ObjectId],\n    default: []\n  }\n})\nlet Conversation = null\ntry {\n  Conversation = mongoose.model('Conversation', ConversationSchema)\n} catch (e) {\n  if (e.name === 'OverwriteModelError') {\n    Conversation = mongoose.model('Conversation')\n  }\n}\n\nexport default Conversation"]}